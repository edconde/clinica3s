spring:
  # Base de datos PostgreSQL en producción
  datasource:
    url: ${DATABASE_URL}
    driver-class-name: org.postgresql.Driver
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
  # H2 Database Console Desactivada en producción
  h2:
    console:
      enabled: false
      path: /h2-console
  # JPA/Hibernate (producción - solo validación, NO auto-crear)
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: validate
    show-sql: false
  # Liquibase (gestor de migraciones en la BD) habilitado en producción
  liquibase:
    enabled: true
    change-log: classpath:/db/changelog/db.changelog-master.yaml
    default-schema: public
    url: ${spring.datasource.url}
    user: ${spring.datasource.username}
    password: ${spring.datasource.password}
    driver-class-name: ${spring.datasource.driver-class-name}
    drop-first: false

# Configuración específica de la aplicación
application:
  security:
    jwt:
      secret-key: ${JWT_SECRET}
      expiration: ${JWT_EXPIRATION:86400000} # 24 hours
    # CORS Configuration (producción)
    cors:
      allowed-origins: ${CORS_ALLOWED_ORIGINS:*}

# Spring Boot Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when_authorized
  
# Logging (menos verboso en producción)
logging:
  level:
    io.github.edconde.clinica3s_backend: INFO
    org.springframework.security: WARN
